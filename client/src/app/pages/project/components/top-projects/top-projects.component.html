<ng2-slim-loading-bar [color]="'#9a91ff'" [height]="'6px'"></ng2-slim-loading-bar>
<div class="row">
  <div class="col-lg-12 col-md-12">
    <nb-card>
      <nb-card-header>Query Top Funded Projects</nb-card-header>
      <nb-card-body>
        <form [formGroup]="myForm" novalidate (ngSubmit)="getTopProjects(myForm)">
          <div class="row">
            <div class="col-4">
              <div class="form-group">
                <label>Select Category</label>
                <select class="form-control ng-untouched ng-pristine ng-valid" formControlName="category">
                  <option></option>
                  <option *ngFor="let category of categories" [ngValue]="category">{{category}}</option>
                </select>
              </div>
            </div>

            <div class="col-4">
              <div class="form-group">
                <label>Select Sub Categories</label>
                <select class="form-control ng-untouched ng-pristine ng-valid" formControlName="subCategory">
                    <option></option>
                  <option *ngFor="let subCategory of subCategories" [ngValue]="subCategory">{{subCategory}}</option>
                </select>
              </div>
            </div>

            <div class="col-4">
              <div class="form-group">
                <label>Select Country Code</label>
                <select class="form-control ng-untouched ng-pristine ng-valid" formControlName="country">
                    <option></option>
                  <option *ngFor="let country of countries" [ngValue]="country">{{country}}</option>
                </select>
              </div>
            </div>

            <button type="submit" class="btn btn-primary pull-right mt-2 btn-xm" 
            [disabled]="!(countries && categories && subCategories && enabled)">Submit</button>


          </div>
        </form>
      </nb-card-body>
    </nb-card>

    <nb-card *ngIf="finalResults">
        <nb-card-header>Results</nb-card-header>
      <nb-card-body>
        <table class="table table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>Name</th>
              <th>Category</th>
              <th>Currency</th>
              <th>Goal</th>
              <th>Pledged</th>
              <th>Backers</th>
              <th>Launched</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor = "let result of finalResults">
              <td>{{result.name}}</td>
              <td>{{result.category}}</td>
              <td>{{result.currency}}</td>
              <td>{{result.goal}}</td>
              <td>{{result.pledged}}</td>
              <td>{{result.backers}}</td>
              <td>{{result.launched}}</td>
            </tr>
          </tbody>
        </table>
      </nb-card-body>
    </nb-card>


  </div>
</div>
